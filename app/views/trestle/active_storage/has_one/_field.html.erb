<div class="active-storage">
  <% if attachment.attached? %>
    <div class="active-storage__preview">
      <% if attachment.blob.image? %>
        <%= render partial: 'trestle/active_storage/has_one/image',
                   locals: { attachment: attachment,
                             field_name: field_name,
                             builder: builder } %>
      <% else %>        
        <%= render partial: 'trestle/active_storage/has_one/default',
                   locals: { attachment: attachment,
                             field_name: field_name,
                             builder: builder } %>
      <% end %>
    </div>

    <%= builder.check_box("delete_#{field_name}", label: "Delete #{field_name}") %>
  <% end %>

  <div class="progress" style="display: none">
    <div class="progress-bar progress-bar-striped active"></div>
  </div>

  <%= builder.raw_file_field(field_name, class: 'active-storage__field', direct_upload: true) %>
</div>
